<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarnelleGPT</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        /* Top Bar Styling */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #fff;
            border-bottom: 1px solid #ccc;
        }
        .menu-icon, .new-chat-icon {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        .menu-icon svg, .new-chat-icon svg {
            width: 100%;
            height: 100%;
            fill: #000;
        }
        .chat-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }
        /* Drawer (Side Menu) Styling */
        .drawer {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background-color: #fff;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            transition: left 0.3s ease;
            padding: 20px;
            z-index: 1001;
        }
        .drawer.open {
            left: 0;
        }
        .drawer ul {
            list-style: none;
            padding: 0;
        }
        .drawer ul li {
            padding: 10px;
            cursor: pointer;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
        }
        .overlay.open {
            display: block;
        }
        /* Login and Chatbot Containers */
        #login-container {
            display: block;
            text-align: center;
            margin-top: 20%;
        }
        #chatbot-container {
            display: none;
        }
        /* Chat Container Styling (Adapt Your Existing Styles Here) */
        .chat-container {
            padding: 20px;
            text-align: center;
        }
        .chat-bubble {
            background-color: #e6f0fa;
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 20px;
        }
        .input-area input {
            width: 70%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .input-area button {
            padding: 8px 15px;
            background-color: #000;
            color: #fff;
            border: none;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Login Container -->
    <div id="login-container">
        <div id="g_id_onload"
             data-client_id="YOUR_GOOGLE_CLIENT_ID"
             data-callback="handleCredentialResponse">
        </div>
        <div class="g_id_signin" data-type="standard"></div>
    </div>

    <!-- Chatbot Container -->
    <div id="chatbot-container">
        <div class="top-bar">
            <div class="menu-icon" id="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
            </div>
            <div class="chat-title">MarnelleGPT</div>
            <div class="new-chat-icon" id="new-chat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
            </div>
        </div>
        <div class="chat-container">
            <div class="chat-bubble">
                Hi! I'm an AI chatbot. Type your question.
            </div>
            <div class="input-area">
                <input type="text" id="user-input" placeholder="Message...">
                <button id="send-button">â†‘</button>
            </div>
        </div>
    </div>

    <!-- Side Menu (Drawer) -->
    <div class="drawer" id="drawer">
        <ul>
            <li id="new-chat-drawer">New Chat</li>
            <li id="logout-button">Logout</li>
        </ul>
    </div>
    <div class="overlay" id="overlay"></div>

    <!-- Google Sign-In Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        // Check if user is already logged in
        if (localStorage.getItem('authToken')) {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('chatbot-container').style.display = 'block';
        }

        // Handle Google Sign-In response
        function handleCredentialResponse(response) {
            const idToken = response.credential;
            localStorage.setItem('authToken', idToken);
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('chatbot-container').style.display = 'block';
        }

        // Menu and Drawer functionality
        const menuIcon = document.getElementById('menu-icon');
        const drawer = document.getElementById('drawer');
        const overlay = document.getElementById('overlay');
        const newChatIcon = document.getElementById('new-chat-icon');
        const newChatDrawer = document.getElementById('new-chat-drawer');
        const logoutButton = document.getElementById('logout-button');

        function toggleDrawer() {
            drawer.classList.toggle('open');
            overlay.classList.toggle('open');
        }

        menuIcon.addEventListener('click', toggleDrawer);
        overlay.addEventListener('click', toggleDrawer);

        // Start a new chat (placeholder function)
        function startNewChat() {
            // Replace this with your logic to clear chat history and start a new conversation
            console.log('Starting a new chat');
            // Example: clear chat bubble content (adapt as needed)
            document.querySelector('.chat-bubble').innerText = "Hi! I'm an AI chatbot. Type your question.";
            document.getElementById('user-input').value = '';
            // Close drawer if open
            drawer.classList.remove('open');
            overlay.classList.remove('open');
        }

        newChatIcon.addEventListener('click', startNewChat);
        newChatDrawer.addEventListener('click', startNewChat);

        // Logout functionality
        logoutButton.addEventListener('click', () => {
            localStorage.removeItem('authToken');
            document.getElementById('chatbot-container').style.display = 'none';
            document.getElementById('login-container').style.display = 'block';
            drawer.classList.remove('open');
            overlay.classList.remove('open');
        });

        // Add your existing JavaScript for chat functionality here (e.g., send button logic)
        document.getElementById('send-button').addEventListener('click', () => {
            const message = document.getElementById('user-input').value;
            console.log('Message sent: ' + message);
            // Add your message handling logic here
        });
    </script>
</body>
</html>